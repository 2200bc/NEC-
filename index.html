<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NEC –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="manifest.json">
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('service-worker.js')
        .then(reg => console.log('Service worker registered', reg))
        .catch(err => console.log('Service worker not registered', err));
    });
  }
</script>

</head>
<body>
  <h1>NEC –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</h1>
  <div class="menu">
    <button onclick="showSection('lines')">1. –ü–æ–¥–±–æ—Ä –ø—Ä–æ–≤–æ–¥–æ–≤</button>
    <button onclick="showSection('derating')">2. –î–∏—Ä–µ–π—Ç–∏–Ω–≥</button>
    <button onclick="showSection('voltage')">3. –ü–∞–¥–µ–Ω–∏–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è</button>
    <button onclick="showSection('panel')">4. –ó–∞–≥—Ä—É–∑–∫–∞ –ø–∞–Ω–µ–ª–∏</button>
    <button onclick="exportData()">üì§ –≠–∫—Å–ø–æ—Ä—Ç</button>
    <input type="file" onchange="importData(event)" />
    <button onclick="resetCalculator()">‚ôªÔ∏è –ù–æ–≤—ã–π —Ä–∞—Å—á—ë—Ç</button>
  </div>

  <div id="section-lines" class="section">
    <h2>1. –ü–æ–¥–±–æ—Ä –ø—Ä–æ–≤–æ–¥–æ–≤</h2>
    <input type="text" id="line-name" placeholder="–ò–º—è –ª–∏–Ω–∏–∏">
<input type="number" id="line-amps" placeholder="–ê–º–ø–µ—Ä–∞–∂">
    <label>–î–ª–∏–Ω–∞ (—Ñ—É—Ç—ã):
  <input type="number" id="line-length" placeholder="–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ">
</label>


<label><input type="radio" name="phase" value="1" checked onchange="updateNeutral()"> 1√ò</label>
<label><input type="radio" name="phase" value="2" onchange="updateNeutral()"> 2√ò</label>
<label><input type="radio" name="phase" value="3" onchange="updateNeutral()"> 3√ò</label>

<label><input type="checkbox" id="line-neutral"> –ù–µ–π—Ç—Ä–∞–ª—å</label>
<button onclick="addLine()">–î–æ–±–∞–≤–∏—Ç—å</button>
    <div id="line-list"></div>
  </div>

  <div id="section-derating" class="section hidden">
    <h2>2. –î–∏—Ä–µ–π—Ç–∏–Ω–≥</h2>
    <label>–¢–∏–ø —Ç—Ä—É–±—ã:
      <select id="conduit-type">
        <option>EMT</option><option>PVC</option><option>IMC</option><option>RMC</option><option>ENT</option>
      </select>
    </label>
    <label>–†–∞–∑–º–µ—Ä —Ç—Ä—É–±—ã:
      <select id="conduit-size">
        <option>0.5</option><option>0.75</option><option>1</option><option>1.25</option><option>1.5</option>
        <option>2</option><option>2.5</option><option>3</option><option>3.5</option><option>4</option>
      </select>
    </label>
    <h4>–í—ã–±–µ—Ä–∏ –ª–∏–Ω–∏–∏:</h4>
    <div id="derating-lines-list" class="checkbox-list"></div>
    <button onclick="calculateDerating()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
    <pre id="derating-result"></pre>
  </div>

  <div id="section-voltage" class="section hidden">
    <h2>3. –ü–∞–¥–µ–Ω–∏–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è</h2>
    <label>–õ–∏–Ω–∏—è: <select id="voltage-line"></select></label><br />
    <label>–ú–∞—Ç–µ—Ä–∏–∞–ª:
      <select id="voltage-material">
        <option value="copper">–ú–µ–¥—å</option>
        <option value="aluminum">–ê–ª—é–º–∏–Ω–∏–π</option>
      </select>
    </label><br />
    <input id="voltage-length" type="number" placeholder="–î–ª–∏–Ω–∞, —Ñ—É—Ç–æ–≤" />
    <input id="voltage-volts" type="number" placeholder="–ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ, V" />
    <button onclick="calculateVoltageDrop()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
    <pre id="voltage-result"></pre>
  </div>

  <div id="section-panel" class="section hidden">
    <h2>4. –ó–∞–≥—Ä—É–∑–∫–∞ –ø–∞–Ω–µ–ª–∏</h2>
    <label><input type="radio" name="panel-type" value="1" checked />1-—Ñ–∞–∑–Ω–∞—è</label>
    <label><input type="radio" name="panel-type" value="3" />3-—Ñ–∞–∑–Ω–∞—è</label><br />
    <input id="panel-slots" type="number" placeholder="–°–ª–æ—Ç–æ–≤ –≤ –ø–∞–Ω–µ–ª–∏" />
    <button onclick="balancePanel()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
    <pre id="panel-result"></pre>
  </div>

  <script src="app.js"></script>
</body>
</html>
