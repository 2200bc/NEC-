
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NEC –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="manifest.json">
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('service-worker.js')
        .then(reg => console.log('Service worker registered', reg))
        .catch(err => console.log('Service worker not registered', err));
    });
  }
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

</head>
<body>
  <h1>NEC –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</h1>

  <div class="form-group">
  <label for="global-system">–°–∏—Å—Ç–µ–º–∞ –ø–∏—Ç–∞–Ω–∏—è:</label>
  <select id="global-system" class="input-field" onchange="updateSystemOptions()">
    <option value="us">–ê–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∞—è (120/208/240‚ÄØ–í)</option>
    <option value="eu">–ï–≤—Ä–æ–ø–µ–π—Å–∫–∞—è / –°–ù–ì (230/400‚ÄØ–í)</option>
  </select>
</div>

  <div class="menu">
  <button onclick="showSection('lines')">1. –ü–æ–¥–±–æ—Ä –ø—Ä–æ–≤–æ–¥–æ–≤</button>
  <button onclick="showSection('derating')">2. –î–∏—Ä–µ–π—Ç–∏–Ω–≥</button>
  <button onclick="showSection('voltage')">3. –ü–∞–¥–µ–Ω–∏–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è</button>
  <button onclick="showSection('panel')">4. –ó–∞–≥—Ä—É–∑–∫–∞ –ø–∞–Ω–µ–ª–∏</button>
  <button onclick="exportData()">üì§ –≠–∫—Å–ø–æ—Ä—Ç</button>

  <input type="file" id="import-file" style="display: none" accept=".json" onchange="importData()" />
  <button onclick="document.getElementById('import-file').click()">üìÇ –ò–º–ø–æ—Ä—Ç</button>

  <button onclick="resetCalculator()">‚ôªÔ∏è –ù–æ–≤—ã–π —Ä–∞—Å—á—ë—Ç</button>
</div>


  <div id="section-lines" class="section">
    <h2>1. –ü–æ–¥–±–æ—Ä –ø—Ä–æ–≤–æ–¥–æ–≤</h2>
    <div class="form-row">
  <input id="line-name" placeholder="–ò–º—è –ª–∏–Ω–∏–∏" />
</div>
<div class="form-row">
  <input id="line-amps" placeholder="–ê–º–ø–µ—Ä–∞–∂" />
  <label for="voltage-length">–î–ª–∏–Ω–∞:</label>
<input id="line-length" placeholder="–î–ª–∏–Ω–∞ (—Ñ—É—Ç—ã)" />

</div>
<div class="form-row">
  <label><input type="radio" name="phase" value="1" checked /> 1√ò</label>
  <label><input type="radio" name="phase" value="2" /> 2√ò</label>
  <label><input type="radio" name="phase" value="3" /> 3√ò</label>
</div>
<div class="form-row">
  <label><input type="checkbox" id="line-neutral" /> –ù–µ–π—Ç—Ä–∞–ª—å</label>
  <button onclick="addLine()">–î–æ–±–∞–≤–∏—Ç—å</button>
</div>

    <div id="line-list"></div>
  </div>

  <div id="section-derating" class="section hidden">
    <h2>2. –î–∏—Ä–µ–π—Ç–∏–Ω–≥</h2>
    <label>–¢–∏–ø —Ç—Ä—É–±—ã:
      <select id="conduit-type">
        <option>EMT</option><option>PVC</option><option>IMC</option><option>RMC</option><option>ENT</option>
      </select>
    </label>
    <label>–†–∞–∑–º–µ—Ä —Ç—Ä—É–±—ã:
      <select id="conduit-size">
        <option>0.5</option><option>0.75</option><option>1</option><option>1.25</option><option>1.5</option>
        <option>2</option><option>2.5</option><option>3</option><option>3.5</option><option>4</option>
      </select>
    </label>
    <h4>–í—ã–±–µ—Ä–∏ –ª–∏–Ω–∏–∏:</h4>
    <div id="derating-lines-list" class="checkbox-list"></div>
    <button onclick="calculateDerating()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
    <pre id="derating-result"></pre>
  </div>

 <div id="section-voltage" class="section hidden">
  <h2>3. –ü–∞–¥–µ–Ω–∏–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è</h2>

  <label>–õ–∏–Ω–∏—è:
    <select id="voltage-line" onchange="updateVoltageDefaults()">
      <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ª–∏–Ω–∏—é</option>
    </select>
  </label><br />



   
  <label>–ú–∞—Ç–µ—Ä–∏–∞–ª:
    <select id="voltage-material">
      <option value="copper">–ú–µ–¥—å</option>
      <option value="aluminum">–ê–ª—é–º–∏–Ω–∏–π</option>
    </select>
  </label><br />

  <input id="voltage-length" type="number" placeholder="–î–ª–∏–Ω–∞, —Ñ—É—Ç–æ–≤" />

 
  <label>–†–∞–∑–º–µ—Ä –ø—Ä–æ–≤–æ–¥–∞:
    <select id="voltage-override">
      <option value="">(–∏–∑ –¥–∞–Ω–Ω—ã—Ö –ª–∏–Ω–∏–∏)</option>
      <option value="12 AWG">12 AWG</option>
      <option value="10 AWG">10 AWG</option>
      <option value="8 AWG">8 AWG</option>
      <option value="6 AWG">6 AWG</option>
      <option value="4 AWG">4 AWG</option>
      <option value="3 AWG">3 AWG</option>
      <option value="2 AWG">2 AWG</option>
      <option value="1 AWG">1 AWG</option>
      <option value="1/0">1/0</option>
      <option value="2/0">2/0</option>
      <option value="3/0">3/0</option>
      <option value="4/0">4/0</option>
      <option value="250 MCM">250 MCM</option>
      <option value="300 MCM">300 MCM</option>
      <option value="350 MCM">350 MCM</option>
      <option value="400 MCM">400 MCM</option>
      <option value="500 MCM">500 MCM</option>
      <option value="600 MCM">600 MCM</option>
      <option value="700 MCM">700 MCM</option>
      <option value="750 MCM">750 MCM</option>
      <option value="800 MCM">800 MCM</option>
      <option value="900 MCM">900 MCM</option>
      <option value="1000 MCM">1000 MCM</option>
    </select>
  </label><br />


    <div>
    <label for="voltage-actual-amps">–†–µ–∞–ª—å–Ω—ã–π —Ç–æ–∫ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):</label>
<input id="voltage-actual-amps" type="number" placeholder="–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: {amps}–ê" />

  </div>

  <button onclick="calculateVoltageDrop()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
  <pre id="voltage-result"></pre>
</div>


 <div id="section-panel" class="section hidden">
  <h2>4. –ó–∞–≥—Ä—É–∑–∫–∞ –ø–∞–Ω–µ–ª–∏</h2>

  <div class="form-row">
    <label><input type="radio" name="panel-type" value="1" checked /> 1-—Ñ–∞–∑–Ω–∞—è</label>
    <label><input type="radio" name="panel-type" value="3" /> 3-—Ñ–∞–∑–Ω–∞—è</label>
  </div>

  <div class="form-row">
    <input id="panel-slots" type="number" min="6" step="2" placeholder="–°–ª–æ—Ç–æ–≤ –≤ –ø–∞–Ω–µ–ª–∏ (—á—ë—Ç–Ω–æ–µ —á–∏—Å–ª–æ)" />
  </div>

  <div class="form-row">
    <button onclick="legacybalancePanel()">üßÆ –¢–µ–∫—Å—Ç–æ–≤–∞—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞</button>
    <button onclick="renderVisualPanel()">üëÅÔ∏è –í–∏–∑—É–∞–ª—å–Ω–æ</button>
    <button onclick="exportVisualPanel()">üì§ –≠–∫—Å–ø–æ—Ä—Ç –ø–∞–Ω–µ–ª–∏</button>
  </div>

  <pre id="panel-result"></pre>
  <div id="panel-visual"></div>
</div>




  <script src="app.js"></script>
</body>
</html>
